
regionsData = 


  {
     image:"FONDO 1.jpg",
     items:[ 

        { id:"montanas_rocosas", type:"naturaleza", name:"Monta√±as Rocosas", x:25, y:40 },
{ id:"alce", type:"animal", name:"Alce", x:30, y:35 },
{ id:"oso_pardo", type:"animal", name:"Oso Pardo", x:35, y:45 },
{ id:"gastronomia_estadounidense", type:"gastronomia", name:"Gastronom√≠a Estadounidense", x:50, y:55 },
{ id:"aguila_calva", type:"animal", name:"√Åguila Calva", x:45, y:35 },
{ id:"las_vegas", type:"ciudad", name:"Las Vegas", x:20, y:60 },
{ id:"cactus", type:"planta", name:"C√°ctus", x:22, y:70 },
{ id:"sequoya", type:"arbol", name:"Sequoya Gigante", x:15, y:55 },
{ id:"vancouver", type:"ciudad", name:"Vancouver", x:20, y:30 },
{ id:"san_francisco", type:"ciudad", name:"San Francisco", x:18, y:58 },
{ id:"golden_gate", type:"lugar", name:"Puente Golden Gate", x:18, y:60 },
{ id:"silicon_valley", type:"lugar", name:"Silicon Valley", x:20, y:62 },
{ id:"los_angeles", type:"ciudad", name:"Los √Ångeles", x:22, y:65 },
{ id:"hollywood", type:"lugar", name:"Hollywood", x:23, y:66 },
{ id:"parques_california", type:"lugar", name:"Parques tem√°ticos de California", x:24, y:68 },
{ id:"marilyn_monroe", type:"persona", name:"Marilyn Monroe", x:25, y:70 },
{ id:"phoenix", type:"ciudad", name:"Phoenix", x:25, y:72 },
{ id:"gran_canon", type:"naturaleza", name:"Gran Ca√±√≥n", x:26, y:68 },
{ id:"desierto_arizona", type:"naturaleza", name:"Desierto de Arizona", x:27, y:75 },
{ id:"indios_yaquis", type:"cultura", name:"Indios Yaquis", x:28, y:78 },
{ id:"energia_nuclear", type:"energia", name:"Energ√≠a Nuclear", x:50, y:45 },
{ id:"dallas", type:"ciudad", name:"Dallas", x:40, y:75 },
{ id:"houston", type:"ciudad", name:"Houston", x:42, y:80 },
{ id:"estacion_espacial", type:"tecnologia", name:"Estaci√≥n Espacial", x:55, y:30 },
{ id:"viuda_negra", type:"animal_peligroso", name:"Viuda Negra", x:35, y:70 },
{ id:"conejo", type:"animal", name:"Conejo Dom√©stico", x:48, y:55 },
{ id:"disney_world", type:"lugar", name:"Disney World", x:55, y:80 },
{ id:"neil_armstrong", type:"persona", name:"Neil Armstrong", x:52, y:50 },
{ id:"blues", type:"musica", name:"Blues", x:45, y:60 },
{ id:"jazz", type:"musica", name:"Jazz", x:46, y:62 },
{ id:"kennedy", type:"lider", name:"John F. Kennedy", x:60, y:50 },
{ id:"lincoln", type:"lider", name:"Abraham Lincoln", x:58, y:48 },
{ id:"martin_luther", type:"lider", name:"Martin Luther King Jr.", x:57, y:55 },
{ id:"chicago", type:"ciudad", name:"Chicago", x:55, y:55 },
{ id:"capitolio", type:"lugar", name:"Capitolio", x:65, y:55 },
{ id:"philadelphia", type:"ciudad", name:"Philadelphia", x:68, y:55 },
{ id:"nueva_york", type:"ciudad", name:"Nueva York", x:70, y:55 },
{ id:"estatua_libertad", type:"estatua", name:"Estatua de la Libertad", x:72, y:55 },
{ id:"harvard", type:"lugar", name:"Universidad de Harvard", x:73, y:52 },
{ id:"andy_warhol", type:"artista", name:"Andy Warhol", x:66, y:50 },
{ id:"orca", type:"animal", name:"Ballena Orca", x:15, y:35 },
{ id:"mariposa_monarca", type:"animal", name:"Mariposa Monarca", x:45, y:70 },
{ id:"nopal", type:"planta", name:"Nopal", x:30, y:80 },
{ id:"zapata", type:"lider", name:"Emiliano Zapata", x:32, y:82 },
{ id:"portaviones", type:"tecnologia", name:"Portaviones", x:20, y:50 },
{ id:"erizo_mar", type:"animal", name:"Erizo rojo de mar", x:15, y:60 },
{ id:"oso_polar", type:"animal", name:"Oso Polar", x:30, y:15 },
{ id:"toronto", type:"ciudad", name:"Toronto", x:60, y:30 },
{ id:"policia_montada", type:"cultura", name:"Polic√≠a Montada Canadiense", x:58, y:25 },
{ id:"maple", type:"arbol", name:"√Årbol de Maple", x:55, y:28 },
{ id:"montreal", type:"ciudad", name:"Montreal", x:65, y:25 }

]
}




{
image:"fondo 2.JPG",
items[
{ id:"vaqueros", type:"cultura", name:"Vaqueros", x:35, y:55 },
{ id:"manati", type:"animal", name:"Manat√≠", x:60, y:65 },
{ id:"tortuga_galapagos", type:"animal", name:"Tortuga Gigante Gal√°pagos", x:25, y:80 },
{ id:"gastronomia_mexicana", type:"gastronomia", name:"Gastronom√≠a Mexicana", x:45, y:55 },
{ id:"monterrey", type:"ciudad", name:"Monterrey", x:40, y:45 },
{ id:"catrina", type:"cultura", name:"La Catrina", x:48, y:58 },
{ id:"guanajuato", type:"ciudad", name:"Guanajuato y San Miguel", x:44, y:58 },
{ id:"guadalajara", type:"ciudad", name:"Catedral de Guadalajara", x:42, y:60 },
{ id:"momias", type:"lugar", name:"Momias de Guanajuato", x:44, y:60 },
{ id:"angel", type:"lugar", name:"√Ångel de la Independencia", x:46, y:55 },
{ id:"catedral_metropolitana", type:"religion", name:"Catedral Metropolitana", x:46, y:56 },
{ id:"lucha_libre", type:"actividad", name:"Lucha Libre", x:47, y:57 },
{ id:"cdmx", type:"ciudad", name:"Ciudad de M√©xico", x:45, y:55 },
{ id:"bellas_artes", type:"museo", name:"Bellas Artes", x:46, y:57 },
{ id:"mariachi", type:"musica", name:"Mariachi", x:44, y:60 },
{ id:"frida", type:"artista", name:"Frida Kahlo", x:47, y:58 },
{ id:"aguila_real", type:"animal", name:"√Åguila Real", x:50, y:50 },
{ id:"oaxaca", type:"ciudad", name:"Oaxaca", x:48, y:65 },
{ id:"tule", type:"arbol", name:"√Årbol del Tule", x:49, y:66 },
{ id:"hierve_agua", type:"naturaleza", name:"Hierve el Agua", x:50, y:67 },
{ id:"voladores", type:"cultura", name:"Voladores de Papantla", x:55, y:55 },
{ id:"palenque", type:"ruinas", name:"Palenque", x:60, y:65 },
{ id:"chichen", type:"maravilla", name:"Chich√©n Itz√°", x:65, y:70 },
{ id:"merida", type:"ciudad", name:"M√©rida", x:66, y:68 },
{ id:"cancun", type:"ciudad", name:"Canc√∫n", x:70, y:65 },
{ id:"tulum", type:"ruinas", name:"Tulum", x:68, y:72 },
{ id:"cenotes", type:"naturaleza", name:"Cenotes", x:67, y:70 },
{ id:"che", type:"lider", name:"Che Guevara", x:55, y:60 },
{ id:"salsa", type:"musica", name:"Salsa", x:60, y:55 },
{ id:"cruceros", type:"lugar", name:"Grandes Cruceros", x:62, y:60 },
{ id:"iguana", type:"animal", name:"Iguana", x:63, y:62 },
{ id:"panama", type:"ciudad", name:"Ciudad de Panam√°", x:50, y:70 },
{ id:"canal_panama", type:"lugar", name:"Canal de Panam√°", x:52, y:72 },
{ id:"bolivar", type:"lider", name:"Sim√≥n Bol√≠var", x:55, y:65 },
{ id:"bogota", type:"ciudad", name:"Bogot√°", x:56, y:68 },
{ id:"medellin", type:"ciudad", name:"Medell√≠n", x:57, y:70 },
{ id:"caracas", type:"ciudad", name:"Caracas", x:60, y:65 },
{ id:"gabo", type:"artista", name:"Gabriel Garc√≠a M√°rquez", x:58, y:67 },
{ id:"botero", type:"artista", name:"Fernando Botero", x:57, y:72 },
{ id:"canaima", type:"naturaleza", name:"Parque Nacional Canaima", x:62, y:75 },
{ id:"salto_angel", type:"naturaleza", name:"Salto √Ångel", x:63, y:76 },
{ id:"amazonas", type:"naturaleza", name:"Selva Amazonas", x:58, y:78 },
{ id:"lima", type:"ciudad", name:"Lima", x:45, y:80 },
{ id:"cuzco", type:"ciudad", name:"Cuzco", x:43, y:82 },
{ id:"machu_picchu", type:"maravilla", name:"Machu Picchu", x:44, y:83 },
{ id:"vinicunca", type:"naturaleza", name:"Monta√±a Vinicunca", x:42, y:85 },
{ id:"tayrona", type:"naturaleza", name:"Parque Tayrona", x:60, y:72 },
{ id:"cocora", type:"naturaleza", name:"Valle de Cocora", x:57, y:73 },
{ id:"gastronomia_peru", type:"gastronomia", name:"Gastronom√≠a Peruana", x:46, y:82 },
{ id:"boa", type:"animal_peligroso", name:"Boa", x:58, y:80 },
{ id:"gastronomia_brasil", type:"gastronomia", name:"Gastronom√≠a Brasile√±a", x:65, y:85 },
{ id:"samba", type:"musica", name:"Samba", x:67, y:86 }

]
}




{
image:"fondo 3.JPG",
items[

{ id:"ballena_azul", type:"animal", name:"Ballena Azul", x:20, y:55 },
{ id:"condor", type:"animal", name:"C√≥ndor", x:30, y:40 },
{ id:"salar_uyuni", type:"naturaleza", name:"Salar de Uyuni", x:40, y:55 },
{ id:"la_paz", type:"ciudad", name:"La Paz", x:38, y:52 },
{ id:"andes", type:"naturaleza", name:"Cordillera de los Andes", x:30, y:60 },
{ id:"santiago", type:"ciudad", name:"Santiago de Chile", x:35, y:70 },
{ id:"titicaca", type:"naturaleza", name:"Lago Titicaca", x:40, y:50 },
{ id:"tango", type:"musica", name:"Tango", x:60, y:75 },
{ id:"bariloche", type:"ciudad", name:"Bariloche", x:45, y:85 },
{ id:"pampa", type:"naturaleza", name:"La Pampa", x:55, y:78 },
{ id:"glaciares", type:"naturaleza", name:"Parque Nacional de los Glaciares", x:40, y:92 },
{ id:"buenos_aires", type:"ciudad", name:"Buenos Aires", x:60, y:80 },
{ id:"sao_paulo", type:"ciudad", name:"Sao Paulo", x:70, y:65 },
{ id:"vaca", type:"animal", name:"Vaca", x:65, y:75 },
{ id:"futbol", type:"actividad", name:"F√∫tbol", x:60, y:70 },
{ id:"niemeyer", type:"arquitecto", name:"Oscar Niemeyer", x:68, y:66 },
{ id:"capoeira", type:"actividad", name:"Capoeira", x:72, y:68 },
{ id:"rio", type:"ciudad", name:"R√≠o de Janeiro", x:75, y:70 }

]
}



{
image:"fondo 4.JPG",
items[

{ id:"san_patricio", type:"festividad", name:"San Patricio", x:35, y:35 },
{ id:"edimburgo", type:"ciudad", name:"Edimburgo", x:38, y:32 },
{ id:"yale", type:"lugar", name:"Universidad de Yale", x:42, y:40 },
{ id:"newton", type:"persona", name:"Isaac Newton", x:40, y:38 },
{ id:"turing", type:"persona", name:"Alan Turing", x:41, y:39 },
{ id:"guardia_real", type:"cultura", name:"Guardia Real", x:42, y:42 },
{ id:"beatles", type:"musica", name:"The Beatles", x:39, y:40 },
{ id:"londres", type:"ciudad", name:"Londres", x:40, y:42 },
{ id:"bigben", type:"lugar", name:"Big Ben", x:41, y:43 },
{ id:"puente_londres", type:"lugar", name:"Puente de Londres", x:42, y:44 },

{ id:"vangogh", type:"artista", name:"Van Gogh", x:45, y:45 },
{ id:"amsterdam", type:"ciudad", name:"√Åmsterdam", x:46, y:43 },
{ id:"tulipanes", type:"naturaleza", name:"Tulipanes y molinos", x:47, y:44 },

{ id:"pasteur", type:"persona", name:"Louis Pasteur", x:48, y:50 },
{ id:"gastronomia_francesa", type:"gastronomia", name:"Gastronom√≠a Francesa", x:47, y:52 },
{ id:"venus_milo", type:"arte", name:"Venus de Milo", x:50, y:53 },

{ id:"leonardo", type:"artista", name:"Leonardo da Vinci", x:52, y:55 },
{ id:"louvre", type:"museo", name:"Louvre", x:49, y:52 },
{ id:"caballo", type:"animal", name:"Caballo", x:50, y:60 },
{ id:"raton", type:"animal", name:"Rat√≥n", x:52, y:62 },

{ id:"torre_eiffel", type:"lugar", name:"Torre Eiffel", x:48, y:53 },
{ id:"paris", type:"ciudad", name:"Par√≠s", x:48, y:52 },
{ id:"zurich", type:"ciudad", name:"Zurich", x:52, y:50 },

{ id:"milan", type:"ciudad", name:"Mil√°n", x:54, y:57 },
{ id:"david", type:"arte", name:"El David", x:55, y:58 },
{ id:"galileo", type:"persona", name:"Galileo Galilei", x:55, y:60 },

{ id:"roma", type:"ciudad", name:"Roma", x:56, y:62 },
{ id:"vaticano", type:"religion", name:"El Vaticano", x:56, y:63 },
{ id:"trevi", type:"lugar", name:"Fuente de Trevi", x:57, y:64 },
{ id:"coliseo", type:"maravilla", name:"Coliseo Romano", x:56, y:65 },
{ id:"napoles", type:"ciudad", name:"N√°poles", x:58, y:67 },
{ id:"pisa", type:"lugar", name:"Torre de Pisa", x:54, y:60 },

{ id:"marco_aurelio", type:"persona", name:"Marco Aurelio", x:57, y:62 },

{ id:"dioses_griegos", type:"mitologia", name:"Dioses Griegos", x:60, y:65 },
{ id:"santorini", type:"ciudad", name:"Santorini", x:61, y:67 },
{ id:"atenas", type:"ciudad", name:"Atenas", x:60, y:66 },
{ id:"partenon", type:"ruinas", name:"El Parten√≥n", x:61, y:66 },
{ id:"aristoteles", type:"persona", name:"Arist√≥teles", x:60, y:64 },

{ id:"constantino", type:"persona", name:"Constantino", x:62, y:60 },
{ id:"santa_sofia", type:"religion", name:"Catedral Santa Sof√≠a", x:63, y:61 },

{ id:"petra", type:"maravilla", name:"Petra", x:65, y:65 },

{ id:"kiev", type:"ciudad", name:"Kiev", x:65, y:50 },

{ id:"viena", type:"ciudad", name:"Vienna", x:58, y:48 },
{ id:"colonia", type:"religion", name:"Catedral de Colonia", x:50, y:45 },
{ id:"berlin", type:"ciudad", name:"Berl√≠n", x:52, y:44 },
{ id:"einstein", type:"persona", name:"Albert Einstein", x:53, y:45 },
{ id:"gutenberg", type:"persona", name:"Johan Gutenberg", x:50, y:46 },

{ id:"lobo_gris", type:"animal", name:"Lobo Gris", x:65, y:45 },

{ id:"moscu", type:"ciudad", name:"Mosc√∫", x:75, y:40 },
{ id:"kremlin", type:"lugar", name:"Plaza Roja y Kremlin", x:76, y:42 },
{ id:"san_basilio", type:"religion", name:"Catedral San Basilio", x:76, y:43 },

{ id:"sagrada_familia", type:"religion", name:"Sagrada Familia", x:45, y:60 },
{ id:"picasso", type:"artista", name:"Pablo Picasso", x:44, y:58 },

{ id:"gastronomia_espanola", type:"gastronomia", name:"Gastronom√≠a Espa√±ola", x:44, y:62 },
{ id:"flamenco", type:"musica", name:"Flamenco", x:44, y:63 },
{ id:"madrid", type:"ciudad", name:"Madrid", x:44, y:61 },
{ id:"palacio_real", type:"lugar", name:"Palacio Real de Madrid", x:45, y:62 },
{ id:"alhambra", type:"lugar", name:"Alhambra de Granada", x:43, y:65 }

]
}




{
image:"fondo 5.JPG",
items[

{ id:"lagos", type:"ciudad", name:"Lagos Nigeria", x:45, y:55 },
{ id:"leon", type:"animal", name:"Le√≥n", x:55, y:60 },
{ id:"elefante", type:"animal", name:"Elefante Africano", x:58, y:65 },
{ id:"guepardo", type:"animal", name:"Guepardo", x:60, y:62 },
{ id:"jirafa", type:"animal", name:"Jirafa", x:62, y:58 },
{ id:"hipopotamo", type:"animal", name:"Hipop√≥tamo", x:57, y:68 },
{ id:"bosquimanos", type:"cultura", name:"Bosquimanos", x:50, y:75 },
{ id:"johanesburgo", type:"ciudad", name:"Johanesburgo", x:60, y:80 },
{ id:"ciudad_cabo", type:"ciudad", name:"Ciudad del Cabo", x:58, y:90 },
{ id:"safari", type:"actividad", name:"Safari", x:55, y:70 },
{ id:"zebra", type:"animal", name:"Zebra", x:63, y:70 },
{ id:"kruger", type:"naturaleza", name:"Parque Nacional Kruger", x:60, y:85 },
{ id:"boulders", type:"lugar", name:"Playa de Boulders", x:58, y:92 }

]
}



{
image:"fondo 6.JPG",
items[

{ id:"camello", type:"animal", name:"Camello", x:45, y:55 },
{ id:"osiris", type:"mitologia", name:"Osiris", x:42, y:40 },
{ id:"nefertiti", type:"lider", name:"Nefertiti", x:44, y:42 },
{ id:"dios_ra", type:"mitologia", name:"Dios Ra", x:43, y:41 },
{ id:"cairo", type:"ciudad", name:"El Cairo", x:45, y:43 },
{ id:"giza", type:"maravilla", name:"Pir√°mides de Giza", x:46, y:45 },
{ id:"nuevo_cairo", type:"ciudad", name:"Nuevo Cairo", x:47, y:46 },
{ id:"museo_egipcio", type:"museo", name:"Gran Museo del Mundo Egipcio", x:45, y:47 },
{ id:"esfinge", type:"lugar", name:"Gran Esfinge", x:46, y:46 },

{ id:"oro", type:"industria", name:"Producci√≥n de Oro", x:50, y:50 },

{ id:"mecca", type:"religion", name:"La Mecca", x:55, y:52 },
{ id:"dubai", type:"ciudad", name:"Dubai", x:58, y:50 },
{ id:"burj", type:"lugar", name:"Burj Khalifa", x:59, y:49 },
{ id:"museo_futuro", type:"museo", name:"Museo del Futuro", x:60, y:48 },

{ id:"bombay", type:"ciudad", name:"Bombay", x:60, y:65 },
{ id:"unidad", type:"estatua", name:"Estatua de la Unidad", x:58, y:68 },
{ id:"creencia", type:"estatua", name:"Estatua de la Creencia", x:59, y:70 },
{ id:"nueva_delhi", type:"ciudad", name:"Nueva Delhi", x:62, y:60 },
{ id:"taj", type:"maravilla", name:"Taj Mahal", x:63, y:62 },

{ id:"cobra", type:"animal_peligroso", name:"Cobra Real", x:65, y:65 },
{ id:"mosquito", type:"animal", name:"Mosquito", x:66, y:66 },
{ id:"abeja", type:"animal", name:"Abeja", x:67, y:67 },

{ id:"zaha", type:"arquitecto", name:"Zaha Hadid", x:55, y:48 }

]
}


{
image:"fondo 7.JPG",
items[

{ id:"everest", type:"naturaleza", name:"Monte Everest", x:45, y:45 },
{ id:"muralla", type:"maravilla", name:"Gran Muralla China", x:55, y:40 },
{ id:"panda", type:"animal", name:"Oso Panda", x:55, y:55 },
{ id:"chongqing", type:"ciudad", name:"Chongqing", x:58, y:52 },
{ id:"nanjing", type:"museo", name:"Museo de Nanjing", x:60, y:50 },
{ id:"museo_china", type:"museo", name:"Museo Nacional de China", x:62, y:48 },
{ id:"shanghai", type:"ciudad", name:"Shangh√°i", x:65, y:52 },

{ id:"seul", type:"ciudad", name:"Se√∫l", x:68, y:48 },
{ id:"tokio", type:"ciudad", name:"Tokio", x:72, y:52 },

{ id:"shenzhen", type:"ciudad", name:"Shenzhen", x:66, y:55 },
{ id:"hongkong", type:"ciudad", name:"Hong Kong", x:67, y:56 },
{ id:"canton", type:"ciudad", name:"Canton", x:65, y:57 },

{ id:"gastronomia_china", type:"gastronomia", name:"Gastronom√≠a China", x:58, y:60 },
{ id:"gastronomia_japonesa", type:"gastronomia", name:"Gastronom√≠a Japonesa", x:72, y:55 },
{ id:"gastronomia_coreana", type:"gastronomia", name:"Gastronom√≠a Coreana", x:68, y:50 },

{ id:"kpop", type:"musica", name:"Kpop", x:69, y:49 },
{ id:"karate", type:"actividad", name:"Karate", x:73, y:54 },
{ id:"koi", type:"animal", name:"Pez Koi", x:72, y:56 },
{ id:"anime", type:"cultura", name:"Anim√©", x:73, y:53 },

{ id:"kioto", type:"ciudad", name:"Kioto", x:72, y:54 },

{ id:"avispon", type:"animal_peligroso", name:"Avisp√≥n Gigante Japon√©s", x:73, y:52 },

{ id:"tren_bala", type:"tecnologia", name:"Tren Bala", x:71, y:50 },

{ id:"taipei", type:"ciudad", name:"Taipei", x:70, y:57 },

{ id:"medusa", type:"animal_peligroso", name:"Medusa", x:75, y:60 },

{ id:"bangkok", type:"ciudad", name:"Bangkok", x:60, y:70 },
{ id:"kuala_lumpur", type:"ciudad", name:"Kuala Lumpur", x:62, y:75 },
{ id:"singapur", type:"ciudad", name:"Singapur", x:64, y:78 },

{ id:"tigre", type:"animal", name:"Tigre", x:58, y:65 }

]
}





{
image:"fondo 8.JPG",
items[

{ id:"surf", type:"actividad", name:"Surf", x:55, y:65 },
{ id:"canguro", type:"animal", name:"Canguro", x:60, y:60 },
{ id:"cocodrilo", type:"animal", name:"Cocodrilo", x:58, y:55 },
{ id:"ornitorrinco", type:"animal", name:"Ornitorrinco", x:62, y:58 },
{ id:"tiburon", type:"animal_peligroso", name:"Tibur√≥n", x:70, y:70 }

]
}


















  

// =============================
// DEFINICI√ìN DE COLECCIONES
// =============================

const collections = {
  animalesPeligrosos: {
    nombre: "Animales Peligrosos",
    icono: "ü¶Ç",
    total: 4,
    items: new Set()
  },
  artistas: {
    nombre: "Artistas y Escritores",
    icono: "üé®",
    total: 8,
    items: new Set()
  },
  ciudades: {
    nombre: "Grandes Ciudades",
    icono: "üèôÔ∏è",
    total: 10,
    items: new Set()
  },
  gastronomia: {
    nombre: "Gastronom√≠as del Mundo",
    icono: "üç≤",
    total: 10,
    items: new Set()
  },
  animales: {
    nombre: "Animales Fascinantes",
    icono: "üêæ",
    total: 10,
    items: new Set()
  },
  maravillas: {
    nombre: "Maravillas del Mundo",
    icono: "üåç",
    total: 7,
    items: new Set()
  }
};

// =============================
// CARGAR PROGRESO
// =============================

function loadCollections() {
  const saved = localStorage.getItem("gameCollections");
  if (saved) {
    const parsed = JSON.parse(saved);
    for (let key in parsed) {
      collections[key].items = new Set(parsed[key]);
    }
  }
}

function saveCollections() {
  const data = {};
  for (let key in collections) {
    data[key] = Array.from(collections[key].items);
  }
  localStorage.setItem("gameCollections", JSON.stringify(data));
}

// =============================
// DESBLOQUEAR ITEM
// =============================

function unlockItem(collectionKey, itemId) {
  const col = collections[collectionKey];

  if (!col) return;

  if (!col.items.has(itemId)) {
    col.items.add(itemId);

    saveCollections();
    renderCollections();

    checkMedalUnlock(collectionKey);
  }
}

// =============================
// MEDALLA
// =============================

function checkMedalUnlock(collectionKey) {
  const col = collections[collectionKey];

  if (col.items.size === col.total) {
    document.getElementById("medalSound").play();

    alert("üèÖ ¬°Medalla desbloqueada! " + col.nombre);
  }
}

// =============================
// UI
// =============================

function renderCollections() {
  const container = document.getElementById("collectionsContainer");
  container.innerHTML = "";

  for (let key in collections) {
    const col = collections[key];

    const progress = `${col.items.size}/${col.total}`;
    const completed = col.items.size === col.total;

    const card = document.createElement("div");
    card.className = "collection-card";

    card.innerHTML = `
      <div>
        <span class="medal ${completed ? "unlocked" : "locked"}">
          ${col.icono}
        </span>
        <strong>${col.nombre}</strong>
      </div>
      <div>Progreso: ${progress}</div>
    `;

    container.appendChild(card);
  }
}

function toggleCollections() {
  const panel = document.getElementById("collectionsPanel");
  panel.classList.toggle("hidden");
}

// =============================
// INICIAR
// =============================

loadCollections();
renderCollections();



